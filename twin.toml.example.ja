# twin.toml.example - Twinè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆæ—¥æœ¬èªç‰ˆï¼‰
# ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’twin.tomlã¨ã—ã¦ã‚³ãƒ”ãƒ¼ã—ã¦ä½¿ç”¨ã—ã¦ãã ã•ã„

# ====================
# åŸºæœ¬è¨­å®š
# ====================

# ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã‚’ä½œæˆã™ã‚‹ãƒ™ãƒ¼ã‚¹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: "./worktrees"
# ç›¸å¯¾ãƒ‘ã‚¹ã¾ãŸã¯çµ¶å¯¾ãƒ‘ã‚¹ã‚’æŒ‡å®šå¯èƒ½
# 'twin add'ã‚³ãƒãƒ³ãƒ‰ã§ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ãªã„å ´åˆã«ä½¿ç”¨ã•ã‚Œã¾ã™
worktree_base = "./worktrees"

# Gitãƒ–ãƒ©ãƒ³ãƒåã®ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ãªã—
# ä¾‹: "agent/"ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’è¨­å®šã™ã‚‹ã¨ã€agent-001 â†’ agent/agent-001 ãƒ–ãƒ©ãƒ³ãƒãŒä½œæˆã•ã‚Œã‚‹
# branch_prefix = "agent/"

# æ–°è¦ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ä½œæˆæ™‚ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
# æŒ‡å®šã—ãªã„å ´åˆã¯ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒã‚’ä½¿ç”¨
# default_branch = "main"

# ====================
# ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒƒãƒ”ãƒ³ã‚°è¨­å®š
# ====================
# å„ç’°å¢ƒã§å…±æœ‰ã—ãŸã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å®šç¾©ã—ã¾ã™
# ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã€ã‚³ãƒ”ãƒ¼ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå‡¦ç†ã‹ã‚‰é¸æŠå¯èƒ½

# ä¾‹1: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã§å…±æœ‰
[[files]]
source = ".claude/config.template.json"  # ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
target = ".claude/config.json"           # ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼å†…ã®é…ç½®å…ˆ
mapping_type = "symlink"                 # ãƒãƒƒãƒ”ãƒ³ã‚°æ–¹å¼ï¼ˆsymlink/copy/templateï¼‰
skip_if_exists = true                    # æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
description = "Claude AIè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«"

# ä¾‹2: ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ï¼ˆå„ç’°å¢ƒã§å€‹åˆ¥ã«ç·¨é›†å¯èƒ½ï¼‰
[[files]]
source = ".env.template"
target = ".env"
mapping_type = "copy"                    # ã‚³ãƒ”ãƒ¼ã—ã¦é…ç½®
skip_if_exists = true                    # æ—¢å­˜ã®.envã¯ä¸Šæ›¸ãã—ãªã„
description = "ç’°å¢ƒå¤‰æ•°è¨­å®š"

# ä¾‹3: VSCodeè¨­å®šã‚’å…±æœ‰
[[files]]
source = ".vscode/settings.template.json"
target = ".vscode/settings.json"
mapping_type = "symlink"
skip_if_exists = false                   # å¸¸ã«ä¸Šæ›¸ã
description = "VSCodeè¨­å®š"

# ä¾‹4: Gitãƒ•ãƒƒã‚¯ã‚’å…±æœ‰
[[files]]
source = "shared/hooks"
target = ".git/hooks"
mapping_type = "symlink"
skip_if_exists = false
description = "å…±æœ‰Gitãƒ•ãƒƒã‚¯"

# ä¾‹5: npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¨­å®š
[[files]]
source = "package.json"
target = "package.json"
mapping_type = "symlink"
skip_if_exists = false
description = "npmä¾å­˜é–¢ä¿‚"

# ä¾‹6: Dockerè¨­å®š
[[files]]
source = "docker-compose.template.yml"
target = "docker-compose.yml"
mapping_type = "copy"
skip_if_exists = true
description = "Docker Composeè¨­å®š"

# ä¾‹7: Kiroä»•æ§˜æ›¸ï¼ˆAIé§†å‹•é–‹ç™ºç”¨ï¼‰
[[files]]
source = ".kiro"
target = ".kiro"
mapping_type = "symlink"
skip_if_exists = false
description = "Kiroä»•æ§˜é§†å‹•é–‹ç™ºãƒ•ã‚¡ã‚¤ãƒ«"

# ====================
# ãƒ•ãƒƒã‚¯è¨­å®š
# ====================
# ç’°å¢ƒã®ä½œæˆãƒ»å‰Šé™¤æ™‚ã«å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’å®šç¾©
# {name} ã¯ç’°å¢ƒåï¼ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåï¼‰ã«ç½®æ›ã•ã‚Œã¾ã™
# {path} ã¯ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã®ãƒ‘ã‚¹ã«ç½®æ›ã•ã‚Œã¾ã™
# {branch} ã¯ãƒ–ãƒ©ãƒ³ãƒåã«ç½®æ›ã•ã‚Œã¾ã™

[hooks]

# ç’°å¢ƒä½œæˆå‰ã«å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰
pre_create = [
    # ãƒ­ã‚°å‡ºåŠ›
    { 
        command = "echo 'ğŸš€ ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã‚’ä½œæˆä¸­: {name} ({path})'", 
        continue_on_error = false,
        description = "ä½œæˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º"
    },
    
    # å¿…è¦ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
    { 
        command = "mkdir -p {path}/.cache {path}/tmp", 
        continue_on_error = true,
        description = "ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ"
    }
]

# ç’°å¢ƒä½œæˆå¾Œã«å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰
post_create = [
    # æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    { 
        command = "echo 'âœ… ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ {name} ã‚’ {path} ã«ä½œæˆã—ã¾ã—ãŸ'", 
        continue_on_error = false,
        description = "æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º"
    },
    
    # ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆpackage.jsonãŒå­˜åœ¨ã™ã‚‹å ´åˆï¼‰
    { 
        command = "cd {path} && [ -f package.json ] && npm install || true", 
        continue_on_error = true,
        timeout = 300,  # 5åˆ†ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
        description = "npmä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"
    },
    
    # ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ç”¨ã®Gitè¨­å®š
    { 
        command = "cd {path} && git config user.email 'agent-{name}@example.com'", 
        continue_on_error = true,
        description = "ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ç”¨ã®Gitãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒ¼ãƒ«ã‚’è¨­å®š"
    },
    
    # VS Codeã§é–‹ãï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
    { 
        command = "code {path}", 
        continue_on_error = true,
        enabled = false,  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ç„¡åŠ¹
        description = "VS Codeã§ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã‚’é–‹ã"
    },
    
    # åˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œï¼ˆå­˜åœ¨ã™ã‚‹å ´åˆï¼‰
    { 
        command = "[ -f ./scripts/setup-environment.sh ] && ./scripts/setup-environment.sh {name} {path} || true", 
        continue_on_error = true,
        timeout = 120,
        description = "ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ"
    }
]

# ç’°å¢ƒå‰Šé™¤å‰ã«å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰
pre_remove = [
    # è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    { 
        command = "echo 'âš ï¸  ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã‚’å‰Šé™¤ä¸­: {name} ({path})'", 
        continue_on_error = false,
        description = "å‰Šé™¤è­¦å‘Šã‚’è¡¨ç¤º"
    },
    
    # ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
    { 
        command = "[ -d ./backups ] && tar -czf ./backups/{name}-$(date +%Y%m%d-%H%M%S).tar.gz {path}/.env {path}/data 2>/dev/null || true", 
        continue_on_error = true,
        enabled = false,  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ç„¡åŠ¹
        description = "ç’°å¢ƒãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—"
    },
    
    # å®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢
    { 
        command = "pkill -f '{path}' || true", 
        continue_on_error = true,
        enabled = false,  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ç„¡åŠ¹
        description = "ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼å†…ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†"
    }
]

# ç’°å¢ƒå‰Šé™¤å¾Œã«å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰
post_remove = [
    # å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    { 
        command = "echo 'ğŸ—‘ï¸  ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ {name} ã‚’ {path} ã‹ã‚‰å‰Šé™¤ã—ã¾ã—ãŸ'", 
        continue_on_error = false,
        description = "å‰Šé™¤å®Œäº†ã‚’è¡¨ç¤º"
    },
    
    # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
    { 
        command = "rm -rf /tmp/cache-{name} 2>/dev/null || true", 
        continue_on_error = true,
        description = "ä¸€æ™‚ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢"
    }
]

# ====================
# é«˜åº¦ãªè¨­å®šï¼ˆæœªå®Ÿè£…ï¼‰
# ====================

# å¤‰æ•°ç½®æ›ã‚’ä½¿ç”¨ã—ãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå‡¦ç†
# [[files]]
# source = "config.template"
# target = "config.json"
# mapping_type = "template"
# variables = { 
#     api_key = "${API_KEY}",
#     environment = "{name}",
#     port = "3000"
# }

# OSã‚„ç’°å¢ƒã«åŸºã¥ãæ¡ä»¶ä»˜ããƒãƒƒãƒ”ãƒ³ã‚°
# [[files]]
# source = "windows-config.json"
# target = ".config/app.json"
# mapping_type = "copy"
# condition = "os.platform == 'windows'"

# ç’°å¢ƒå›ºæœ‰ã®ãƒ•ãƒƒã‚¯
# [hooks.environments.production]
# pre_create = [
#     { command = "echo 'æœ¬ç•ªç’°å¢ƒã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ä¸­'", continue_on_error = false }
# ]

# ç‰¹å®šæ©Ÿèƒ½ç”¨ã®ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã•ã‚ŒãŸãƒ•ãƒƒã‚¯
# [hooks.groups.database]
# pre_create = [
#     { command = "docker-compose up -d postgres", continue_on_error = false },
#     { command = "npm run db:migrate", continue_on_error = false }
# ]

# ====================
# è¨­å®šæ§‹é€ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
# ====================

[settings]
# ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã®ãƒ™ãƒ¼ã‚¹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆä¸Šè¨˜ã®worktree_baseã¨åŒã˜ï¼‰
worktree_base = "./worktrees"

# è©³ç´°å‡ºåŠ›ã‚’æœ‰åŠ¹åŒ–
# verbose = true

# ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ãƒ¢ãƒ¼ãƒ‰ï¼ˆã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã›ãšã€å®Ÿè¡Œå†…å®¹ã®ã¿è¡¨ç¤ºï¼‰
# dry_run = false

# ãƒ•ãƒƒã‚¯ã‚³ãƒãƒ³ãƒ‰ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆç§’ï¼‰
# hook_timeout = 60

# æœ€å¤§ä¸¦åˆ—ãƒ•ãƒƒã‚¯å®Ÿè¡Œæ•°
# max_parallel_hooks = 4

# ã‚«ãƒ©ãƒ¼å‡ºåŠ›ã‚’æœ‰åŠ¹åŒ–
# color_output = true

# ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
# log_file = "./twin.log"

# ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ï¼ˆdebug, info, warn, errorï¼‰
# log_level = "info"